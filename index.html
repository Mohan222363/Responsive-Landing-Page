<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Interactive Fixed Navigation</title>
  <style>
    :root{
      --nav-height: 64px;
      --nav-padding: 12px 28px;
      --transparent-bg: rgba(255,255,255,0); /* initial */
      --scrolled-bg: rgba(255,255,255,0.95);
      --text-on-dark: #ffffff;
      --text-on-light: #222222;
      --accent: #0b84ff;
      --radius: 8px;
      --transition: 220ms cubic-bezier(.2,.9,.3,1);
    }

    /* Basic reset */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; } /* smooth scroll on click */
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; line-height: 1.4; }

    /* Fixed navigation */
    nav.navbar {
      --height: var(--nav-height);
      position: fixed;
      inset: 0 0 auto 0; /* top:0; left:0; right:0 */
      height: var(--height);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: var(--nav-padding);
      background: var(--transparent-bg);
      backdrop-filter: blur(6px);
      transition: background var(--transition), box-shadow var(--transition), padding var(--transition);
      z-index: 1200;
    }

    /* Style when scrolled */
    nav.navbar.scrolled {
      background: var(--scrolled-bg);
      box-shadow: 0 8px 20px rgba(16,24,40,0.08);
      padding: 8px 28px;
    }

    /* Navbar inner container */
    .nav-inner {
      width: 100%;
      max-width: 1200px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
      color: var(--text-on-dark);
      text-decoration: none;
      font-size: 18px;
    }

    /* Menu */
    .nav-menu {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .nav-menu a {
      display: inline-block;
      text-decoration: none;
      padding: 8px 14px;
      border-radius: var(--radius);
      font-weight: 600;
      font-size: 15px;
      transition: transform var(--transition), background var(--transition), color var(--transition);
      /* default text color when nav is transparent (over colored hero) */
      color: var(--text-on-dark);
    }

    /* Hover effect */
    .nav-menu a:hover {
      transform: translateY(-3px);
      background: rgba(11,132,255,0.12);
      color: var(--accent);
    }

    /* Active link (section in view) */
    .nav-menu a.active {
      background: var(--accent);
      color: #0a0a0a;
      box-shadow: 0 6px 18px rgba(11,132,255,0.18);
    }

    /* When navbar has scrolled class, invert link colors to suit light background */
    nav.navbar.scrolled .nav-menu a {
      color: var(--text-on-light);
    }
    /* Hover and active on scrolled */
    nav.navbar.scrolled .nav-menu a:hover {
      background: rgba(11,132,255,0.12);
      color: var(--accent);
    }
    nav.navbar.scrolled .nav-menu a.active {
      background: var(--accent);
      color: #1c1717;
    }

    /* Make sure sections are not hidden behind the fixed nav */
    main > section {
      min-height: 100vh;
      padding: calc(var(--nav-height) + 28px) 20px 60px 20px;
      scroll-margin-top: calc(var(--nav-height) + 12px); /* offset for anchor jumps */
      display: flex;
      align-items: start;
      justify-content: center;
    }

    /* Example section styles (you can change colors) */
    #home { background: linear-gradient(120deg,#f46b45,#eea849); color: #111; }
    #about { background: linear-gradient(120deg,#2bd6c9,#2a9d8f); color: #042; }
    #services { background: linear-gradient(120deg,#ffd166,#f4a261); color: #222; }
    #contact { background: linear-gradient(120deg,#264653,#2a2f45); color: #fff; }

    /* Content wrapper for nice reading width */
    .container {
      width: 100%;
      max-width: 1100px;
    }

    /* Example heading styles */
    h1 { margin: 10px 0 18px 0; font-size:  clamp(28px, 3vw, 40px); }
    p { max-width: 70ch; }

    /* Small screens: stack nav */
    @media (max-width:720px){
      .nav-inner { padding: 0 8px; }
      .nav-menu { gap: 6px; }
      .nav-menu a { padding: 8px 10px; font-size: 14px;}
    }
   
    .site-title {
      font-size: 20px;
      margin: 0;
      color: #0a0a0a;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
  </style>
</head>
<body>
  <!-- Fixed Navigation (include on every page / in site header) -->
  <nav class="navbar" id="navbar" role="navigation" aria-label="Main Navigation">
    <div class="nav-inner container">
      <a href="/" class="brand" aria-label="Site home">
        <!-- simple SVG icon -->
        <svg width="28" height="28" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path fill="currentColor" d="M12 2L2 7v7c0 5 3.6 9 10 9s10-4 10-9V7l-10-5z"/>
        </svg>
       <h1 class="site-title">My Site</h1>
      </a>

      <div class="nav-menu" id="navMenu">
        <a href="#home">Home</a>
        <a href="#about">About</a>
        <a href="#services">Services</a>
        <a href="#contact">Contact</a>
      </div>
    </div>
  </nav>

  <!-- Page content -->
  <main>
    <section id="home" aria-labelledby="home-title">
      <div class="container">
        <h1 id="home-title">Home</h1>
        <p>Welcome â€” this is the hero/home section. Scroll down to see the navbar change and the menu items update.</p>
      </div>
    </section>

    <section id="about" aria-labelledby="about-title">
      <div class="container">
        <h1 id="about-title">About</h1>
        <p>About content goes here. The nav highlights the current section as you scroll.</p>
      </div>
    </section>

    <section id="services" aria-labelledby="services-title">
      <div class="container">
        <h1 id="services-title">Services</h1>
        <p>Describe services. Hover any menu item to see the hover style; the nav background changes on scroll.</p>
      </div>
    </section>

    <section id="contact" aria-labelledby="contact-title">
      <div class="container">
        <h1 id="contact-title">Contact</h1>
        <p>Contact info or form. The active nav link will show while this section is visible.</p>
      </div>
    </section>
  </main>

  <script>
    (function(){
      const navbar = document.getElementById('navbar');
      const navLinks = document.querySelectorAll('.nav-menu a');
      const sections = document.querySelectorAll('main > section');

      // 1) Toggle scrolled class when page is scrolled past threshold
      const SCROLL_THRESHOLD = 60;
      function updateNavbarOnScroll(){
        if(window.scrollY > SCROLL_THRESHOLD) navbar.classList.add('scrolled');
        else navbar.classList.remove('scrolled');
      }
      updateNavbarOnScroll();
      window.addEventListener('scroll', updateNavbarOnScroll, {passive: true});

      // 2) Use IntersectionObserver to detect which section is in view and highlight the corresponding nav link
      const observerOpts = {
        root: null,
        rootMargin: `-${Math.round(window.innerHeight * 0.35)}px 0px -${Math.round(window.innerHeight * 0.35)}px 0px`,
        threshold: 0
      };

      function clearActive(){
        navLinks.forEach(a => {
          a.classList.remove('active');
          a.removeAttribute('aria-current');
        });
      }

      const io = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if(entry.isIntersecting){
            const id = entry.target.id;
            const link = document.querySelector(`.nav-menu a[href="#${id}"]`);
            if(link){
              clearActive();
              link.classList.add('active');
              link.setAttribute('aria-current', 'true'); // accessibility
            }
          }
        });
      }, observerOpts);

      sections.forEach(s => io.observe(s));

      // 3) Smooth scroll offset fix if you want custom behavior for clicking (optional):
      //    Using CSS scroll-margin-top on sections already compensates for the fixed nav.
      //    Still, we prevent default tiny jumps for older browsers:
      navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
          // let browser handle smooth scrolling; ensure hash updates.
          // but keep same-page behavior consistent:
          const href = link.getAttribute('href');
          if(href && href.startsWith('#')){
            e.preventDefault();
            const target = document.querySelector(href);
            if(target){
              const y = target.getBoundingClientRect().top + window.pageYOffset - (parseInt(getComputedStyle(document.documentElement).getPropertyValue('--nav-height')) || 64) - 8;
              window.scrollTo({ top: y, behavior: 'smooth' });
              history.replaceState(null, '', href); // update URL hash w/out jump
            }
          }
        });
      });

      // 4) Optional: adjust observer rootMargin on resize for consistent behavior
      window.addEventListener('resize', () => {
        io.disconnect();
        // recompute rootMargin similar to above
        const newRootMargin = `-${Math.round(window.innerHeight * 0.35)}px 0px -${Math.round(window.innerHeight * 0.35)}px 0px`;
        io.rootMargin = newRootMargin;
        sections.forEach(s => io.observe(s));
      }, {passive:true});
    })();
  </script>
</body>
</html>
